<!DOCTYPE html>
<html lang="id" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destinasi Wisata - Kediri Tourism</title>
    <meta name="description" content="Jelajahi berbagai destinasi wisata menarik di Kota Kediri mulai dari alam, sejarah, hingga wisata keluarga">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/wisata.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="spinner-ring"></div>
        <p>Memuat Destinasi Wisata...</p>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <img src="../images/logo.jpg" alt="Logo Kediri Tourism" height="40" width="40">
                <span>Kediri Tourism</span>
            </a>
            
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="wisata.html">Wisata</a></li>
                    <li class="nav-item"><a class="nav-link" href="kuliner.html">Kuliner</a></li>
                    <li class="nav-item"><a class="nav-link" href="budaya.html">Budaya</a></li>
                    <li class="nav-item"><a class="nav-link" href="peta.html">Peta</a></li>
                </ul>
                
                <div class="d-flex align-items-center gap-2 mt-3 mt-lg-0">
                    <button class="btn btn-sm btn-outline-secondary" id="themeToggle">
                        <i class="bi bi-moon"></i>
                    </button>
                    <button class="btn btn-sm btn-primary" id="locationAccess">
                        <i class="bi bi-geo-alt"></i> <span class="d-none d-md-inline">Lokasi</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="../index.html">Home</a></li>
                            <li class="breadcrumb-item active">Destinasi Wisata</li>
                        </ol>
                    </nav>
                    <h1 class="display-4 fw-bold mb-3">Destinasi Wisata Kediri</h1>
                    <p class="lead mb-0 opacity-90">Temukan keindahan alam, sejarah, dan wisata keluarga yang menakjubkan di Kota Kediri</p>
                </div>
                <div class="col-lg-4 text-lg-end mt-4 mt-lg-0">
                    <div class="header-stats">
                        <h3 class="mb-0" id="totalDestinations">0+</h3>
                        <small>Tempat Wisata</small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="section-padding scroll-reveal">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Kategori Wisata</h2>
                <p class="section-subtitle">Jelajahi berbagai jenis wisata yang ditawarkan oleh Kota Kediri</p>
            </div>
            <div class="row g-4" id="categoriesGrid">
                <!-- Categories will be loaded by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section scroll-reveal">
        <div class="container">
            <div class="row g-3">
                <div class="col-lg-3 col-md-6">
                    <select class="form-select" id="categoryFilter">
                        <option value="">Semua Kategori</option>
                        <!-- Options will be loaded by JavaScript -->
                    </select>
                </div>
                <div class="col-lg-3 col-md-6">
                    <select class="form-select" id="priceFilter">
                        <option value="">Semua Harga</option>
                        <option value="gratis">Gratis</option>
                        <option value="murah">Murah (< Rp 20k)</option>
                        <option value="sedang">Sedang (Rp 20k - 50k)</option>
                    </select>
                </div>
                <div class="col-lg-3 col-md-6">
                    <select class="form-select" id="ratingFilter">
                        <option value="">Semua Rating</option>
                        <option value="5">⭐ 5.0</option>
                        <option value="4">⭐ 4.0+</option>
                        <option value="3">⭐ 3.0+</option>
                    </select>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Cari destinasi..." id="searchDestinations">
                        <button class="btn btn-primary" type="button" onclick="window.wisataPage.applyFilters()">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Destinations Grid -->
    <section class="section-padding scroll-reveal">
        <div class="container">
            <div class="row g-4" id="destinationsGrid">
                <!-- Destinations will be loaded by JavaScript -->
            </div>
            
            <div id="loadingDestinations" class="text-center py-5" style="display: none;">
                <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3 text-muted">Memuat destinasi wisata...</p>
            </div>
            
            <div id="noResults" class="text-center py-5" style="display: none;">
                <i class="bi bi-search display-1 text-muted"></i>
                <h4 class="mt-3 text-muted">Tidak ada destinasi yang ditemukan</h4>
                <p class="text-muted">Coba ubah filter pencarian Anda</p>
                <button class="btn btn-primary mt-3" onclick="window.wisataPage.clearFilters()">
                    <i class="bi bi-arrow-clockwise"></i> Reset Filter
                </button>
            </div>
        </div>
    </section>

    <!-- Featured Destinations -->
    <section class="section-padding bg-light scroll-reveal">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Destinasi Unggulan</h2>
                <p class="section-subtitle">Tempat-tempat terbaik yang wajib dikunjungi di Kediri</p>
            </div>
            
            <div class="row g-4" id="featuredDestinations">
                <!-- Featured destinations will be loaded by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="section-padding scroll-reveal">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h2 class="section-title mb-4">Peta Wisata Kediri</h2>
                    <p class="mb-4">Temukan lokasi semua destinasi wisata di Kediri dengan peta interaktif kami.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check-circle-fill"></i> Navigasi real-time ke lokasi wisata</li>
                        <li><i class="bi bi-check-circle-fill"></i> Informasi lengkap setiap destinasi</li>
                        <li><i class="bi bi-check-circle-fill"></i> Rute tercepat dari lokasi Anda</li>
                        <li><i class="bi bi-check-circle-fill"></i> Filter berdasarkan kategori</li>
                    </ul>
                    <a href="peta.html?filter=wisata" class="btn btn-primary btn-lg mt-3">
                        <i class="bi bi-map"></i> Buka Peta Wisata
                    </a>
                </div>
                <div class="col-lg-6">
                    <div class="map-preview">
                        <div class="text-center text-white">
                            <i class="bi bi-map display-1"></i>
                            <p class="mt-3 fw-bold">Peta Interaktif Wisata</p>
                            <small class="opacity-90">Temukan wisata terdekat dari lokasi Anda</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <img src="../images/logo.jpg" alt="Logo Kediri Tourism" height="40" class="mb-3">
                    <p class="mb-4">Portal wisata resmi Kota Kediri yang menyediakan informasi lengkap tentang destinasi, kuliner, budaya, dan navigasi real-time.</p>
                    <div class="social-links">
                        <a href="#"><i class="bi bi-facebook"></i></a>
                        <a href="#"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-twitter-x"></i></a>
                        <a href="#"><i class="bi bi-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-6">
                    <h5>Menu</h5>
                    <ul class="list-unstyled">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="wisata.html">Wisata</a></li>
                        <li><a href="kuliner.html">Kuliner</a></li>
                        <li><a href="budaya.html">Budaya</a></li>
                        <li><a href="peta.html">Peta</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-6">
                    <h5>Informasi</h5>
                    <ul class="list-unstyled">
                        <li><a href="tentang.html">Tentang Kami</a></li>
                        <li><a href="kontak.html">Kontak</a></li>
                        <li><a href="#">Kebijakan Privasi</a></li>
                        <li><a href="#">Syarat & Ketentuan</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h5>Kontak</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="bi bi-geo-alt"></i> Jl. Mayor Bismo No.1, Kediri</li>
                        <li class="mb-2"><i class="bi bi-telephone"></i> (0354) 123456</li>
                        <li class="mb-2"><i class="bi bi-envelope"></i> info@kediri-tourism.com</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 opacity-25">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-2 mb-md-0">
                    <p class="mb-0">&copy; 2024 Kediri Tourism. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="mb-0">Made with <i class="bi bi-heart-fill text-danger"></i> for Kediri</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top -->
    <button id="backToTop" class="back-to-top">
        <i class="bi bi-arrow-up"></i>
    </button>

    <!-- Destination Detail Modal -->
    <div class="modal fade destination-detail-modal" id="destinationDetailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="destinationDetailModalLabel">Detail Destinasi</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="destinationDetailContent">
                        <!-- Content will be loaded by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        class WisataPage {
            constructor() {
                this.filters = {
                    category: '',
                    price: '',
                    rating: '',
                    search: ''
                };
                this.config = null;
                this.searchTimeout = null;
                this.init();
            }
            
            async init() {
                this.setupTheme();
                this.setupEventListeners();
                await this.loadConfig();
                this.setupScrollEffects();
                setTimeout(() => {
                    document.getElementById('loading').classList.add('hidden');
                }, 1000);
            }
            
            async loadConfig() {
                try {
                    this.showLoading(true);
                    const response = await fetch('../config/config-website.json');
                    this.config = await response.json();
                    
                    if (this.config && this.config.destinations) {
                        this.renderCategories();
                        this.renderFilters();
                        this.renderDestinations();
                        this.renderFeaturedDestinations();
                        this.updateStats();
                    } else {
                        throw new Error('Data destinasi tidak ditemukan');
                    }
                    
                    this.showLoading(false);
                } catch (error) {
                    console.error('Error loading config:', error);
                    this.showNotification('Gagal memuat data destinasi', 'error');
                    this.showLoading(false);
                    this.loadFallbackData();
                }
            }

            loadFallbackData() {
                this.config = {
                    destinations: [
                        {
                            id: 1,
                            name: "Gunung Kelud",
                            category: "alam",
                            image: "../images/destinations/gunung-kelud.jpg",
                            rating: 4.8,
                            reviews: 1247,
                            description: "Gunung berapi aktif dengan kawah yang menakjubkan dan pemandangan alam yang memukau.",
                            price: "Rp 15.000",
                            priceCategory: "murah",
                            distance: "25 km",
                            featured: true,
                            tags: ["Alam", "Petualangan", "Fotografi"],
                            details: {
                                alamat: "Kecamatan Ngancar, Kabupaten Kediri, Jawa Timur",
                                jamOperasional: "06:00 - 17:00 WIB",
                                fasilitas: ["Parkir", "Toilet", "Warung Makan", "Pemandu Wisata"],
                                kontak: "(0857 9137 1559)"
                            }
                        }
                    ],
                    categories: [
                        { name: "Wisata Alam", icon: "mountains", count: 4, description: "Gunung, air terjun, dan pemandangan alam" },
                        { name: "Wisata Sejarah", icon: "building", count: 3, description: "Candi, museum, dan situs bersejarah" },
                        { name: "Wisata Keluarga", icon: "people", count: 2, description: "Taman rekreasi dan tempat bersantai" },
                        { name: "Wisata Religi", icon: "house-heart", count: 1, description: "Masjid, gereja, dan tempat ibadah" }
                    ]
                };
                
                this.renderCategories();
                this.renderFilters();
                this.renderDestinations();
                this.renderFeaturedDestinations();
                this.updateStats();
            }
            
            setupTheme() {
                const theme = localStorage.getItem('theme') || 'light';
                document.documentElement.setAttribute('data-bs-theme', theme);
                const icon = document.querySelector('#themeToggle i');
                if (icon) {
                    icon.className = theme === 'dark' ? 'bi bi-sun' : 'bi bi-moon';
                }
            }
            
            setupEventListeners() {
                // Theme toggle
                const themeToggle = document.getElementById('themeToggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', () => {
                        const current = document.documentElement.getAttribute('data-bs-theme');
                        const theme = current === 'light' ? 'dark' : 'light';
                        document.documentElement.setAttribute('data-bs-theme', theme);
                        localStorage.setItem('theme', theme);
                        const icon = document.querySelector('#themeToggle i');
                        icon.className = theme === 'dark' ? 'bi bi-sun' : 'bi bi-moon';
                    });
                }

                // Location access
                const locationBtn = document.getElementById('locationAccess');
                if (locationBtn) {
                    locationBtn.addEventListener('click', () => {
                        this.requestLocation();
                    });
                }

                // Filter events
                document.getElementById('categoryFilter').addEventListener('change', (e) => {
                    this.filters.category = e.target.value;
                    this.applyFilters();
                });
                
                document.getElementById('priceFilter').addEventListener('change', (e) => {
                    this.filters.price = e.target.value;
                    this.applyFilters();
                });
                
                document.getElementById('ratingFilter').addEventListener('change', (e) => {
                    this.filters.rating = e.target.value;
                    this.applyFilters();
                });
                
                document.getElementById('searchDestinations').addEventListener('input', (e) => {
                    this.filters.search = e.target.value;
                    clearTimeout(this.searchTimeout);
                    this.searchTimeout = setTimeout(() => this.applyFilters(), 500);
                });

                // Scroll effects
                window.addEventListener('scroll', () => {
                    const navbar = document.querySelector('.navbar');
                    const backToTop = document.getElementById('backToTop');
                    
                    if (window.scrollY > 100) {
                        navbar.classList.add('scrolled');
                        backToTop.classList.add('show');
                    } else {
                        navbar.classList.remove('scrolled');
                        backToTop.classList.remove('show');
                    }
                });

                // Back to top
                const backToTop = document.getElementById('backToTop');
                if (backToTop) {
                    backToTop.addEventListener('click', () => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    });
                }
            }

            setupScrollEffects() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('revealed');
                        }
                    });
                }, { threshold: 0.1 });

                document.querySelectorAll('.scroll-reveal').forEach(el => {
                    observer.observe(el);
                });
            }

            requestLocation() {
                if (!navigator.geolocation) {
                    this.showNotification('Browser tidak mendukung geolocation', 'error');
                    return;
                }

                this.showNotification('Mendeteksi lokasi...', 'info');

                navigator.geolocation.getCurrentPosition(
                    () => {
                        this.showNotification('Lokasi terdeteksi!', 'success');
                    },
                    () => {
                        this.showNotification('Gagal mengakses lokasi', 'error');
                    }
                );
            }
            
            renderCategories() {
                const container = document.getElementById('categoriesGrid');
                const categories = this.config.categories || [];
                
                if (categories.length === 0) {
                    container.innerHTML = '<div class="col-12"><p class="text-center text-muted">Data kategori tidak tersedia</p></div>';
                    return;
                }
                
                container.innerHTML = categories.map(category => `
                    <div class="col-lg-3 col-md-6">
                        <div class="category-card" onclick="window.wisataPage.filterByCategory('${this.getCategoryValue(category.name)}')">
                            <i class="bi bi-${category.icon}"></i>
                            <h4>${category.name}</h4>
                            <p>${category.description}</p>
                            <span class="category-count">${category.count} Tempat</span>
                        </div>
                    </div>
                `).join('');
            }
            
            getCategoryValue(categoryName) {
                const categoryMap = {
                    'Wisata Alam': 'alam',
                    'Wisata Sejarah': 'sejarah',
                    'Wisata Keluarga': 'keluarga',
                    'Wisata Religi': 'religi'
                };
                return categoryMap[categoryName] || categoryName.toLowerCase();
            }
            
            renderFilters() {
                const categoryFilter = document.getElementById('categoryFilter');
                const categories = this.config.categories || [];
                
                // Clear existing options
                categoryFilter.innerHTML = '<option value="">Semua Kategori</option>';
                
                // Render category options
                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = this.getCategoryValue(category.name);
                    option.textContent = category.name;
                    categoryFilter.appendChild(option);
                });
            }
            
            renderDestinations() {
                const container = document.getElementById('destinationsGrid');
                let destinations = this.config.destinations || [];
                
                // Apply filters
                if (this.filters.category) {
                    destinations = destinations.filter(dest => dest.category === this.filters.category);
                }
                if (this.filters.price) {
                    destinations = destinations.filter(dest => dest.priceCategory === this.filters.price);
                }
                if (this.filters.rating) {
                    const minRating = parseInt(this.filters.rating);
                    destinations = destinations.filter(dest => dest.rating >= minRating);
                }
                if (this.filters.search) {
                    const search = this.filters.search.toLowerCase();
                    destinations = destinations.filter(dest => 
                        dest.name.toLowerCase().includes(search) || 
                        dest.description.toLowerCase().includes(search) ||
                        (dest.tags && dest.tags.some(tag => tag.toLowerCase().includes(search)))
                    );
                }

                if (destinations.length === 0) {
                    container.innerHTML = '';
                    document.getElementById('noResults').style.display = 'block';
                    document.getElementById('loadingDestinations').style.display = 'none';
                    return;
                }

                document.getElementById('noResults').style.display = 'none';
                document.getElementById('loadingDestinations').style.display = 'none';

                container.innerHTML = destinations.map(dest => `
                    <div class="col-lg-4 col-md-6">
                        <div class="card destination-card h-100 hover-lift">
                            <div class="card-img-wrapper">
                                <img src="${dest.image}" class="card-img-top" alt="${dest.name}" loading="lazy" onerror="this.src='../images/placeholder.jpg'">
                                <span class="card-badge">${this.getCategoryName(dest.category)}</span>
                                <div class="card-rating">
                                    <i class="bi bi-star-fill"></i>
                                    ${dest.rating}
                                </div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">${dest.name}</h5>
                                <p class="card-text text-muted">${dest.description}</p>
                                <div class="destination-meta">
                                    <small class="text-muted"><i class="bi bi-geo-alt"></i> ${dest.distance}</small>
                                    <small class="text-muted"><i class="bi bi-tag"></i> ${dest.price}</small>
                                </div>
                                <div class="tags mt-3">
                                    ${(dest.tags || []).map(tag => `<span class="badge bg-light text-dark me-1 mb-1">${tag}</span>`).join('')}
                                </div>
                            </div>
                            <div class="card-footer bg-transparent border-0 pt-0 pb-3">
                                <div class="d-flex gap-2">
                                    <button class="btn btn-primary btn-sm flex-grow-1" onclick="window.wisataPage.showDestinationDetail(${dest.id})">
                                        <i class="bi bi-info-circle"></i> Detail
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm" onclick="window.wisataPage.showLocation(${dest.id})">
                                        <i class="bi bi-geo-alt"></i> Lokasi
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm" onclick="window.wisataPage.addToFavorite(${dest.id})">
                                        <i class="bi bi-heart"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            getCategoryName(category) {
                const categoryMap = {
                    'alam': 'Wisata Alam',
                    'sejarah': 'Wisata Sejarah',
                    'keluarga': 'Wisata Keluarga',
                    'religi': 'Wisata Religi'
                };
                return categoryMap[category] || category;
            }
            
            renderFeaturedDestinations() {
                const container = document.getElementById('featuredDestinations');
                const destinations = this.config.destinations || [];
                
                const featured = destinations.filter(dest => dest.featured).slice(0, 3);
                
                if (featured.length === 0) {
                    container.innerHTML = '<div class="col-12"><p class="text-center text-muted">Tidak ada destinasi unggulan</p></div>';
                    return;
                }
                
                container.innerHTML = featured.map(dest => `
                    <div class="col-lg-4 col-md-6">
                        <div class="card featured-destination-card h-100 hover-lift">
                            <div class="card-img-wrapper">
                                <img src="${dest.image}" class="card-img-top" alt="${dest.name}" loading="lazy" onerror="this.src='../images/placeholder.jpg'">
                                <span class="featured-badge">⭐ Unggulan</span>
                                <div class="card-rating">
                                    <i class="bi bi-star-fill"></i>
                                    ${dest.rating}
                                </div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">${dest.name}</h5>
                                <p class="card-text text-muted">${dest.description}</p>
                                <div class="rating mb-3">
                                    <i class="bi bi-star-fill text-warning"></i>
                                    <span class="fw-bold">${dest.rating}</span>
                                    <small class="text-muted ms-1">(${dest.reviews} reviews)</small>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-primary flex-grow-1" onclick="window.wisataPage.showDestinationDetail(${dest.id})">
                                        <i class="bi bi-info-circle"></i> Detail
                                    </button>
                                    <button class="btn btn-outline-primary" onclick="window.wisataPage.showLocation(${dest.id})">
                                        <i class="bi bi-geo-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            updateStats() {
                const total = (this.config.destinations || []).length;
                document.getElementById('totalDestinations').textContent = `${total}+`;
            }
            
            showDestinationDetail(destinationId) {
                const destination = (this.config.destinations || []).find(dest => dest.id === destinationId);
                if (!destination) return;
                
                const modalLabel = document.getElementById('destinationDetailModalLabel');
                const modalContent = document.getElementById('destinationDetailContent');
                
                modalLabel.textContent = destination.name;
                
                modalContent.innerHTML = `
                    <div class="destination-info-section">
                        <div class="row align-items-center">
                            <div class="col-md-5">
                                <img src="${destination.image}" class="img-fluid rounded-3 shadow-sm" alt="${destination.name}" onerror="this.src='../images/placeholder.jpg'">
                            </div>
                            <div class="col-md-7 mt-3 mt-md-0">
                                <div class="mb-3">
                                    <span class="badge bg-primary me-2">${this.getCategoryName(destination.category)}</span>
                                    <span class="card-rating d-inline-flex">
                                        <i class="bi bi-star-fill"></i>
                                        ${destination.rating} <small class="ms-1">(${destination.reviews} reviews)</small>
                                    </span>
                                </div>
                                <h4 class="mb-2">${destination.name}</h4>
                                <p class="mb-2 text-muted">${destination.description}</p>
                                <div class="destination-meta-details">
                                    <div class="meta-item">
                                        <i class="bi bi-geo-alt text-primary"></i>
                                        <span>${destination.distance}</span>
                                    </div>
                                    <div class="meta-item">
                                        <i class="bi bi-tag text-primary"></i>
                                        <span>${destination.price}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="destination-info-section">
                        <h5 class="mb-3"><i class="bi bi-info-circle text-primary me-2"></i>Informasi Lengkap</h5>
                        <div class="info-grid">
                            <div class="info-item">
                                <strong><i class="bi bi-geo-alt"></i> Alamat</strong>
                                <span>${destination.details?.alamat || 'Informasi alamat belum tersedia'}</span>
                            </div>
                            <div class="info-item">
                                <strong><i class="bi bi-clock"></i> Jam Operasional</strong>
                                <span>${destination.details?.jamOperasional || 'Informasi jam operasional belum tersedia'}</span>
                            </div>
                            <div class="info-item">
                                <strong><i class="bi bi-telephone"></i> Kontak</strong>
                                <span>${destination.details?.kontak || 'Informasi kontak belum tersedia'}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="destination-info-section">
                        <h5 class="mb-3"><i class="bi bi-list-check text-primary me-2"></i>Fasilitas</h5>
                        <div class="facilities-list">
                            ${(destination.details?.fasilitas || []).map(fasilitas => `
                                <span class="facility-tag">
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                    ${fasilitas}
                                </span>
                            `).join('')}
                            ${(!destination.details?.fasilitas || destination.details.fasilitas.length === 0) ? 
                                '<p class="text-muted">Informasi fasilitas belum tersedia.</p>' : ''}
                        </div>
                    </div>
                    
                    <div class="destination-info-section">
                        <h5 class="mb-3"><i class="bi bi-tags text-primary me-2"></i>Tags</h5>
                        <div class="tags-list">
                            ${(destination.tags || []).map(tag => `<span class="badge bg-primary">${tag}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="destination-info-section">
                        <div class="d-flex gap-2">
                            <button class="btn btn-primary flex-grow-1" onclick="window.wisataPage.showLocation(${destination.id})">
                                <i class="bi bi-geo-alt"></i> Lihat Lokasi di Peta
                            </button>
                            <button class="btn btn-success flex-grow-1" onclick="window.wisataPage.addToFavorite(${destination.id})">
                                <i class="bi bi-heart"></i> Tambah Favorit
                            </button>
                        </div>
                    </div>
                `;
                
                const modal = new bootstrap.Modal(document.getElementById('destinationDetailModal'));
                modal.show();
            }
            
            filterByCategory(category) {
                document.getElementById('categoryFilter').value = category;
                this.filters.category = category;
                this.applyFilters();
            }
            
            applyFilters() {
                this.showLoading(true);
                setTimeout(() => {
                    this.renderDestinations();
                }, 300);
            }
            
            clearFilters() {
                this.filters = {
                    category: '',
                    price: '',
                    rating: '',
                    search: ''
                };
                document.getElementById('categoryFilter').value = '';
                document.getElementById('priceFilter').value = '';
                document.getElementById('ratingFilter').value = '';
                document.getElementById('searchDestinations').value = '';
                this.applyFilters();
            }
            
            showLoading(show) {
                document.getElementById('loadingDestinations').style.display = show ? 'block' : 'none';
                if (!show) {
                    document.getElementById('destinationsGrid').style.display = '';
                }
            }
            
            addToFavorite(destinationId) {
                const favorites = JSON.parse(localStorage.getItem('destinationFavorites') || '[]');
                
                if (favorites.includes(destinationId)) {
                    this.showNotification('Sudah ada di favorit', 'info');
                } else {
                    favorites.push(destinationId);
                    localStorage.setItem('destinationFavorites', JSON.stringify(favorites));
                    this.showNotification('Ditambahkan ke favorit!', 'success');
                }
            }
            
            showLocation(destinationId) {
                this.showNotification('Membuka peta lokasi...', 'info');
                // Redirect to map page with filter
                window.location.href = `peta.html?filter=wisata&destination=${destinationId}`;
            }
            
            showNotification(message, type = 'info') {
                const container = document.getElementById('toastContainer');
                
                const icons = {
                    success: 'check-circle-fill',
                    error: 'x-circle-fill',
                    info: 'info-circle-fill',
                    warning: 'exclamation-triangle-fill'
                };
                
                const notification = document.createElement('div');
                notification.className = `toast-notification ${type}`;
                notification.innerHTML = `
                    <i class="bi bi-${icons[type]} text-${type === 'error' ? 'danger' : type}"></i>
                    <span>${message}</span>
                    <button type="button" class="btn-close ms-auto" aria-label="Close"></button>
                `;

                container.appendChild(notification);
                
                // Close button
                const closeBtn = notification.querySelector('.btn-close');
                closeBtn.addEventListener('click', () => {
                    notification.style.animation = 'slideInRight 0.3s ease reverse';
                    setTimeout(() => notification.remove(), 300);
                });

                // Auto remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.style.animation = 'slideInRight 0.3s ease reverse';
                        setTimeout(() => notification.remove(), 300);
                    }
                }, 5000);
            }
        }
        
        // Initialize Wisata Page
        document.addEventListener('DOMContentLoaded', () => {
            window.wisataPage = new WisataPage();
        });
    </script>
</body>
</html>